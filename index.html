<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">

  <title>Hello, world!</title>
</head>

<body>
  <h1>Hello, world!</h1>

  <!-- Optional JavaScript; choose one of the two! -->

  <!-- Option 1: Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
    crossorigin="anonymous"></script>

  <!-- Option 2: Separate Popper and Bootstrap JS -->
  <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" integrity="sha384-IQsoLXl5PILFhosVNubq5LC7Qb9DXgDA9i+tQ8Zj3iwWAwPtgFTxbJ8NT4GN1R8p" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.min.js" integrity="sha384-cVKIPhGWiC2Al4u+LWgxfKTRIcfu0JTxR+EQDz/bgldoEyl4H0zUF0QKbrJ0EcQF" crossorigin="anonymous"></script>
    -->

  <form id="form1">
    <div class="mb-3">
      <label for="companyName" class="form-label">company name</label>
      <input type="text" class="form-control" id="companyName" required>
    </div>
    <div class="mb-3">
      <label for="NIP" class="form-label">NIP</label>
      <input type="text" class="form-control" id="NIP" required>
    </div>
    <div class="mb-3">
      <label for="city" class="form-label">city</label>
      <input type="text" class="form-control" id="city" required>
    </div>
    <div class="mb-3">
      <label for="street" class="form-label">street</label>
      <input type="text" class="form-control" id="street" required>
    </div>
    <div class="mb-3">
      <label for="houseNumber" class="form-label">house number</label>
      <input type="text" class="form-control" id="houseNumber" required>
    </div>
    <div class="mb-3">
      <label for="flatNumber" class="form-label">flat number</label>
      <input type="text" class="form-control" id="flatNumber">
    </div>
    <div class="mb-3">
      <label for="postNumber" class="form-label">post number</label>
      <input type="text" class="form-control" id="postNumber" required>
    </div>

    <div class="mb-3">
      <label for="comments" class="form-label">comments</label>
      <textarea class="form-control" id="comments" rows="3"></textarea>
    </div>

    <div class="mb-3">
      <label for="industry" class="form-label">industry</label>
      <select class="form-select" id="industry" required>
        <option value="IT">IT</option>
        <option value="logistics">logistics</option>
        <option value="finance">finance</option>
        <option value="other">other</option>
      </select>
    </div>

    <div class="mb-3 form-check">
      <label class="form-check-label" for="online">online</label>
      <input type="checkbox" class="form-check-input" id="online" required>
    </div>

  </form>
  <button type="button" onclick="save()">save</button>
  <button type="button" onclick="insert()">insert</button>

  <ul class="list-group" id="list1">
    <!-- <li class="list-group-item">An item</li>
    <li class="list-group-item">A second item</li>
    <li class="list-group-item">A third item</li>
    <li class="list-group-item">A fourth item</li>
    <li class="list-group-item">And a fifth one</li> -->
  </ul>

  <button type="button" onclick="showList()">showList</button>
  <button type="button" onclick="showForm()">Show form</button>


</body>

<footer>
  <script>

    const customers = []

    function save() {
      let newCustomer = {
        companyName: document.getElementById("companyName").value,
        nip: document.getElementById("NIP").value,
        city: document.getElementById("city").value,
        street: document.getElementById("street").value,
        houseNumber: document.getElementById("houseNumber").value,
        flatNumber: document.getElementById("flatNumber").value,
        postNumber: document.getElementById("postNumber").value,
        comment: document.getElementById("comments").value,
        industry: document.getElementById("industry").value,
        online: document.getElementById("online").checked

      }
      console.log("industry: ", newCustomer.industry)
      let customerAlreadySaved = false
      for (let i=0; i<customers.length; i++){
        console.log("list:", customers[i].nip, "new:", newCustomer.nip)
        if(customers[i].nip===newCustomer.nip)
        {
          // console.log("Customer already saved.")
          customerAlreadySaved = true
          customers[i] = newCustomer

          break
        }
      }
      // console.log("value check:", customerAlreadySaved)

      if(!customerAlreadySaved){
        customers.push(newCustomer)
        console.log(newCustomer)
        console.log(customers)
      }

      document.getElementById("form1").reset()

    }


    function insert() {
      document.getElementById("companyName").value = "COmPaNy";
      document.getElementById("companyName").readOnly = true;         //zamiast readOnly mozna dac disabled
      document.getElementById("NIP").value = "76524515";
      document.getElementById("NIP").readOnly = true;
      document.getElementById("city").value = "Krakow";
      document.getElementById("city").readOnly = true;
      document.getElementById("street").value = "Pawia";
      document.getElementById("street").readOnly = true;
      document.getElementById("houseNumber").value = "1";
      document.getElementById("houseNumber").readOnly = true;
      document.getElementById("flatNumber").value = "1";
      document.getElementById("flatNumber").readOnly = true;
      document.getElementById("postNumber").value = "11111";
      document.getElementById("postNumber").readOnly = true;

      document.getElementById("online").checked = true;
      document.getElementById("online").disabled = true;

      
    console.log("Inserted some data into form")
    }


    function showForm() {
      document.getElementById("form1").style.display = "block"
      document.getElementById("list1").style.display = "none"
      document.getElementById("NIP").readOnly = false;
    }

    function showList() {
      document.getElementById("list1").style.display = "block"
      document.getElementById("form1").style.display = "none"

      let ul = document.getElementById("list1")
      ul.innerHTML = ""
      
      for (let i = 0; i < customers.length; i++) {
        console.log("displaing list")
        ul.innerHTML += `<li class="list-group-item" onclick="editClient('${customers[i].nip}') ">${customers[i].nip}</li>`  

      }

    }

    function editClient(nip) {   
      showForm();
      let customer
      for (let i = 0; i < customers.length; i++) {
        if(customers[i].nip==nip){
          customer = customers[i]
        }
      }
      console.log("inside of editClient()")
      document.getElementById("companyName").value = customer.companyName;
      document.getElementById("companyName").readOnly = false;
      document.getElementById("NIP").value = customer.nip;
      document.getElementById("NIP").readOnly = true;
      document.getElementById("city").value = customer.city;
      document.getElementById("city").readOnly = false;
      document.getElementById("street").value = customer.street;
      document.getElementById("street").readOnly = false;
      document.getElementById("houseNumber").value = customer.houseNumber;
      document.getElementById("houseNumber").readOnly = false;
      document.getElementById("flatNumber").value = customer.flatNumber;
      document.getElementById("flatNumber").readOnly = false;
      document.getElementById("postNumber").value = customer.postNumber;
      document.getElementById("postNumber").readOnly = false;
      document.getElementById("online").checked = customer.checked;
      document.getElementById("online").readOnly = false;
      document.getElementById("comments").value = customer.comment;
      document.getElementById("industry").value = customer.industry;
      
    }



  </script>
</footer>

</html>